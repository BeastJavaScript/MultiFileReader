// Generated by CoffeeScript 1.7.1
(function() {
  var LineReaderSync, MegaFile, fs;

  LineReaderSync = require("beast-lr-sync").LineReaderSync;

  fs = require("fs");

  MegaFile = (function() {
    function MegaFile(files) {
      this.files = files;
      this.position = 0;
      this.reader = null;
    }

    MegaFile.prototype.getNextLine = function() {
      return this.reader.readLine();
    };

    MegaFile.prototype.hasNextLine = function() {
      if ((this.reader === null || !this.reader.hasNext()) && this.hasNextFile()) {
        this.updateReader();
      }
      if (this.reader.hasNext()) {
        return true;
      } else {
        return this.hasNextFile();
      }
    };

    MegaFile.prototype.updateReader = function() {
      return this.reader = new LineReaderSync(this.getFile());
    };

    MegaFile.prototype.file = function() {
      if (typeof this.files[this.position] === "string") {
        return this.files[this.position];
      } else {
        return null;
      }
    };

    MegaFile.prototype.getFile = function() {
      var file;
      file = this.file();
      this.position++;
      return file;
    };

    MegaFile.prototype.hasNextFile = function() {
      var file, stat;
      if (this.file()) {
        file = this.file();
        if ((stat = fs.statSync(file)) && stat.isFile()) {
          return true;
        }
      } else {
        return false;
      }
    };

    MegaFile.prototype.reset = function() {
      this.position = 0;
      return this.reader = null;
    };

    return MegaFile;

  })();

  module.exports.MegaFile = MegaFile;

}).call(this);
